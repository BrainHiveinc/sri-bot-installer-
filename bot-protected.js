// Agent Sri - Telegram Bot
// Copyright (c) 2026 BrainHive Inc. Free to use
require('dotenv').config();const{Telegraf:t}=require('telegraf'),{spawn:e}=require('child_process'),s=require('fs'),r=require('path'),o=new t(process.env.BOT_TOKEN),n=r.join(__dirname,'agent_cli_protected.py');console.log(''),console.log('â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—'),console.log('â•‘    ðŸ¤– Agent Sri - Telegram Bot (FREE)                      â•‘'),console.log('â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•'),console.log(''),console.log('âœ… Memory enabled (50 messages)'),console.log('âœ… File reading (PDF, text, images)'),console.log('âœ… URL fetching and learning'),console.log('âœ… Free to use'),console.log('');async function a(t,r){return new Promise((o,a)=>{console.log(`ðŸ“© Message from ${t}: ${r}`);const l=e('python3',[n,t,r]);let c='',i='';l.stdout.on('data',t=>{c+=t.toString()}),l.stderr.on('data',t=>{i+=t.toString()}),l.on('close',t=>{0!==t?(console.error('âŒ Agent error:',i),a(new Error(i||'Agent failed'))):(console.log('âœ… Agent response received'),o(c.trim()||'No response from agent'))})})}o.on('text',async t=>{const e=t.from.id.toString(),s=t.message.text;try{const r=await a(e,s);await t.reply(r)}catch(e){console.error('Error:',e.message),await t.reply('Sorry, something went wrong. Please try again.')}}),o.on('document',async t=>{await t.reply('File handling coming soon!')}),o.on('photo',async t=>{await t.reply('Image processing coming soon!')}),o.launch().then(()=>{console.log('âœ… Bot started successfully'),console.log('Send a message to your bot on Telegram!')}).catch(t=>{console.error('âŒ Failed to start bot:',t),process.exit(1)}),process.once('SIGINT',()=>o.stop('SIGINT')),process.once('SIGTERM',()=>o.stop('SIGTERM'));
